<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product CRUD</title>
    <style>
        body { font-family: Arial; }
    </style>
</head>
<body>

<h3>Product Management Operations</h3>

<button onclick="fetchProducts()">Fetch Products</button>
<button onclick="addProduct()">Add Product</button>
<button onclick="updateProduct()">Update Product</button>
<button onclick="deleteProduct()">Delete Product</button>

<ul id="products"></ul>

<script>
    let jsonData = [
        { item: "Laptop", price: 60000 },
        { item: "Mouse", price: 500 },
        { item: "Keyboard", price: 700 },
        { item: "Speaker", price: 5000 }
    ];

    const productUl = document.getElementById("products");
    function fetchProducts() {
        fetch("products", { method: "GET" })
            .then(() => Promise.resolve(jsonData))
            .then(products => {
                productUl.innerHTML = "";
                products.forEach((product, index) => {
                    const li = document.createElement("li");
                    li.textContent = `ID: ${index}  Item: ${product.item}  Price: â‚¹${product.price}`;
                    productUl.appendChild(li);
                });
            });
    }
    function addProduct() {
        const item = prompt("Enter product name:");
        const price = prompt("Enter product price:");

        if (!item || !price) return;

        fetch("products", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ item, price })
        })
        .then(() => {
            jsonData.push({ item, price });
            alert("Product added");
            fetchProducts();
        });
    }
    function updateProduct() {
        const id = prompt("Enter product ID to update:");
        const newItem = prompt("Enter new product name:");
        const newPrice = prompt("Enter new product price:");

        if (!jsonData[id]) {
            alert("Invalid Product ID");
            return;
        }

        fetch(`products/${id}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ item: newItem, price: newPrice })
        })
        .then(() => {
            jsonData[id] = { item: newItem, price: newPrice };
            alert("Product updated");
            fetchProducts();
        });
    }
    function deleteProduct() {
        const id = prompt("Enter product ID to delete:");

        if (!jsonData[id]) {
            alert("Invalid Product ID");
            return;
        }

        fetch(`products/${id}`, { method: "DELETE" })
            .then(() => {
                jsonData.splice(id, 1);
                alert("Product deleted");
                fetchProducts();
            });
    }
</script>

</body>
</html>
